# Locked Models Directory

This directory contains **auto-generated TypeScript files** for locked AI models.

## ğŸ”’ What are Locked Models?

When a model is "locked" in the Admin UI, the system generates a dedicated TypeScript file that contains:

- **Frozen Schema**: The input schema at the time of locking (never changes unless unlocked/re-locked)
- **Model Configuration**: Artifio.ai credit cost, estimated time, provider details
- **Payload Preparation**: Model-specific logic for preparing API requests
- **Validation**: Model-specific validation rules
- **Cost Calculation**: Credit cost calculation with multipliers
- **Execution**: Complete orchestration of the generation flow

## âš ï¸ DO NOT EDIT THESE FILES MANUALLY

These files are auto-generated by the lock system. Manual edits will be overwritten.

### To make changes to a locked model:

1. Open the model in Admin UI
2. Click "Unlock Model"
3. Make your changes to the schema/config
4. Test the changes
5. Click "Lock Model" again to regenerate the file

## ğŸ“ File Naming Convention

Files are named after the model name, sanitized for use as TypeScript filenames:

- `GoogleVeo31HQ.ts` - Google Veo 3.1 HQ model
- `GoogleVeo31Fast.ts` - Google Veo 3.1 Fast model
- `RunwareLumaFlux.ts` - Runware Luma Flux model

## ğŸ¯ Why Locked Models?

**Production Stability**: Locked models are isolated from changes to the dynamic system. Changes to `executeGeneration.ts` or shared logic won't affect locked models.

**Transparency**: Open any locked file and see exactly what code runs for that model. No hidden logic.

**Model-Specific Logic**: Each model can have its own payload preparation, validation, and execution logic without affecting other models.

**Artifio.ai Metrics**: Credit cost and estimated time are frozen in each file, ensuring consistent billing.

**Git Audit Trail**: Every change to a locked model is tracked in Git via file diffs.

## ğŸ”„ Lock Workflow

```
Admin UI (Unlocked)
    â†“ Design & Test
    â†“ Click "Lock Model"
    â†“
Generated File (src/lib/models/locked/ModelName.ts)
    â†“
Production (Isolated, Stable)
    â†“ Need Changes?
    â†“ Click "Unlock"
    â†“
Admin UI (Unlocked) - Make Changes
    â†“ Test
    â†“ Click "Re-lock"
    â†“
Updated File (Git diff shows changes)
```

## ğŸ“Š Model Execution Flow

When a user generates content with a locked model:

1. `ModelRouter.ts` detects the model is locked
2. Dynamically imports the locked model file
3. Calls the `execute()` function from the locked file
4. The locked file handles everything: validation, cost calc, provider call, polling
5. Unlocked models still use the dynamic `executeGeneration()` flow

## ğŸ”§ Developer Notes

- Each locked model is **completely independent**
- Shared code is limited to: provider clients, UI renderers, types
- Duplication is accepted as the cost of stability
- Focus on isolation over DRY principles
