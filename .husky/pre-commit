#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run TypeScript type check
echo "ğŸ” Running TypeScript check..."
npm run typecheck
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Commit blocked: Fix TypeScript errors before committing"
  exit 1
fi

# Run ESLint
echo "ğŸ” Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Commit blocked: Fix linting errors before committing"
  exit 1
fi

# Validate edge functions for deprecated patterns
echo "ğŸ” Validating edge functions..."
npm run validate:edge-functions
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Commit blocked: Fix deprecated patterns before committing"
  exit 1
fi

echo "âœ… All checks passed!"
